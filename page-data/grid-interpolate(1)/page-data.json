{"componentChunkName":"component---src-templates-blog-post-index-jsx","path":"/grid-interpolate(1)/","result":{"data":{"site":{"siteMetadata":{"title":"QDS"}},"markdownRemark":{"id":"9d1283b9-0b7c-5a3c-9755-db3354f82636","excerpt":"关于MeteoInfoLab MeotoInfoLab对于处理气象相关的工作是十分有用且高效的。MeotoInfoLab是使用的jython脚本进行开发，是一个好消息但仔细想想也很难让人接受。可以使用基本Python3的语法但无法使用丰富的cpython包，但也MatLab、Numpy、Matplotlib…","html":"<h2>关于MeteoInfoLab</h2>\n<p>MeotoInfoLab对于处理气象相关的工作是十分有用且高效的。MeotoInfoLab是使用的jython脚本进行开发，是一个好消息但仔细想想也很难让人接受。可以使用基本Python3的语法但无法使用丰富的cpython包，但也MatLab、Numpy、Matplotlib实现了一些函数，可以满足部分的需求。具体的信息以及学习的脚本可以看<a href=\"http://bbs.06climate.com/forum.php?mod=viewthread&#x26;tid=36151&#x26;highlight=meteoinfolab\">气象家园</a>相关内容。</p>\n<h2>使用关于MeteoInfoLab实现插值</h2>\n<p>在这里借助气象家园的插值脚本进行改写，可以多看看的<a href=\"http://bbs.06climate.com/forum.php?mod=viewthread&#x26;tid=36422&#x26;extra=page%3D1\">原始脚本=》》</a>。</p>\n<h3>分析脚本</h3>\n<p>原始脚本中最关键的函数就是插值函数griddata(),主要需要两个参数：坐标的经度和坐标的纬度组成的坐标点(<em>list</em>),以及坐标相对应的特征值，比如温度、风速、降水等信息(<em>array_like</em>)。除外还需要插值的目标点坐标，插值的方法（idw | cressman | nearest | inside | inside<em>min| inside</em>max | inside_count | surface | barnes）以及插值的方式对应所需要的参数。但调好这些参数确实需要一些经验，对于我这种小白就用默认的值吧。</p>\n<h3>具体实现</h3>\n<p>数据点经度是以范围为[73.03125, 136.96875]以0.0625间距的点，数据点纬度是以范围为[18.03125, 55.96875]以0.0625间距的点。对应的点坐标数据存储在txt文件中以空格分隔。</p>\n\n        <deckgo-highlight-code language=\"python\"  terminal=\"carbon\" theme=\"lucario\" >\n          <code slot=\"code\">lat = arange(18.03125, 55.96875+0.0625,0.0625,&#39;float64&#39;)  #纬度\nlon = arange(73.03125, 136.96875+0.0625,0.0625,&#39;float64&#39;) #经度\nlon_repeat=[val for i in range(lat.size) for val in lon]\nlat_repeat=[val for val in lat for i in range(lon.size)]\nwith open(&quot;/home/qianh/workspace/share/linhuo/20200521.txt&quot;,&quot;r&quot;) as f:\n    data = f.readlines()\n    temdata=[line.strip() for line in data]\nfinalData=[float(i) for temp in temdata for i in temp.split(&#39; &#39;) if len(i)&gt;0]\nx = arange(75, 135, 0.0625)\ny = arange(18, 55, 0.0625)\nprg = griddata((NDArray(lon_repeat),NDArray(lat_repeat)), NDArray(finalData), xi=(x, y), method=&#39;idw&#39;, radius=0.1)[0]\n#prg = griddata((NDArray(lon_repeat),NDArray(lat_repeat)), NDArray(finalData), xi=(x, y), method=&#39;cressman&#39;, radius=[0.1])[0]\nfigure(newfig=True)#每次运行可以添加一个新的figure\nbou1_layer = geoshow(&#39;cn_border&#39;, facecolor=(0,0,255))\nchina_layer = geoshow(&#39;china&#39;, visible=False)\nlevs = [0.1, 1, 2, 4, 6, 8, 10, 20, 50,100]\ncols = [(255,255,255),(206,255,255),(37,255,252),(36,183,255),(3,120,180),(21,81,203),(9,47,210), (136,23,240),(106,21,159),(76,15,105)]\nlayer = contourfm(x, y, prg, levs, colors=cols)\nmasklayer(china_layer, [layer])\ncolorbar(layer)\nxlim(72, 136)\nylim(16, 55)</code>\n        </deckgo-highlight-code>\n      \n<p><span style=\"color: green\"> 其中要注意将list格式数据转换为NDArray类型的，不然会报错 </span>。其中的插值目标点的间距可以自行修改，本脚本采用的是0.0625。cressman和idw的对应参数(radius)也可以进行调整。levs是图例的范围和下面的cols一一对应。最后展示运行数据图<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/Charging/static/85baf5c2eb83de381454ba703c7c681a/e8e04/meteoinfo.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.27027027027027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABeUlEQVQoz3VSPUsDQRDNX7SwE/0FYpNGsLPwX1goCobEVKJYpBGSIGghBBLDgQqXGDV33Ff2e5+ze0kImiw8Zmdu5s2b26mAjrUWC6uUgpQKWpeQ5Ks5fJxsnAmEEXMVGH9MkKfFsr6ySiilBGPcJwppwITxd2ONBxzoPMUK3WFJ0rp6xntv7O/G/CEUQhC448BLqtFLDTJBqjWREhTlnNSmODz9QTeSEOS3GxN8DmalQvNPoUCachoPiImgoPhcFCQRO03Vmwh7+yHOu5mPN+9G6AfFeoWOsCg4jeuDPhYqg8tghpz8nHz35+Y9/Kl33tAfpSWh3TCy1o7covclcUSKds8mOLiPUPvmaL0yXDQS6LIEzSDCIBGbCTnny+6cRlczi9upxvH1FFvbAao7AR7qcZlAZe0sR2jM5lfmnPkV0STTrYi1GnEhoDKF4WMBkdM3KylH+/woSfxqrSV01lA3p9KRLqwkqw0R0bsq2k23Wi7OWNl8tf4XR0GylfXWLLIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"全国降水图\"\n        title=\"全国降水图\"\n        src=\"/Charging/static/85baf5c2eb83de381454ba703c7c681a/fcda8/meteoinfo.png\"\n        srcset=\"/Charging/static/85baf5c2eb83de381454ba703c7c681a/12f09/meteoinfo.png 148w,\n/Charging/static/85baf5c2eb83de381454ba703c7c681a/e4a3f/meteoinfo.png 295w,\n/Charging/static/85baf5c2eb83de381454ba703c7c681a/fcda8/meteoinfo.png 590w,\n/Charging/static/85baf5c2eb83de381454ba703c7c681a/efc66/meteoinfo.png 885w,\n/Charging/static/85baf5c2eb83de381454ba703c7c681a/c83ae/meteoinfo.png 1180w,\n/Charging/static/85baf5c2eb83de381454ba703c7c681a/e8e04/meteoinfo.png 1270w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"学习插值(一)","date":"June 04, 2020","description":"Hello World"}}},"pageContext":{"slug":"/grid-interpolate(1)/","previous":{"id":"5d69a6e6-ee29-51b3-bc05-8730f7b6fb7a","frontmatter":{"title":"新公司第一天","tags":["life"],"date":"2020年05月12日"},"fields":{"slug":"/life_newCompany/"},"excerpt":"上午 或许是太久没有上班了吧。还记得上次上班还是在2月初，那个时候刚刚在家上班一周就被停掉了，这一停就停到到了现在。这家公司是大概是在…"},"next":{"id":"c314ad4b-6116-5925-a5b5-2cbb9d473f4a","frontmatter":{"title":"uni-app使用openlayers","tags":["uni-app","openlayers","gis"],"date":"2020年06月25日"},"fields":{"slug":"/uniapp-openlayers/"},"excerpt":"1.概要 uniapp在提供了强大的多端转换功能的同时，也会极大的限制用户的操作并且为用户提供大量的bug。但对于节约成本和快速上线的app可以还是值得使用的。 2.使用openlayers 在使用openlayers的时候，和在一般的vue框架中使用没有太大的差别。但是uni…"}}}}